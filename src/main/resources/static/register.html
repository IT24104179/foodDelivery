<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>ByteEats • Register</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<div class="container">
    <div class="card" style="max-width:400px; margin:40px auto; padding:20px;">
        <h2 style="text-align:center; margin-bottom:20px;">Customer Registration</h2>
        <form id="registerForm">
            <input type="text"     id="username"    placeholder="Username"  required>
            <input type="email"    id="email"       placeholder="Email"     required>
            <input type="password" id="password"    placeholder="Password"  required>
            <input type="text"     id="address"     placeholder="Address"   required>
            <input type="text"     id="phoneNumber" placeholder="Phone"     required>
            <button id="regBtn" type="submit">Register</button>
        </form>
        <p id="msg" style="text-align:center; margin-top:10px;"></p>
        <p style="text-align:center; margin-top:15px;">
            Already have an account? <a href="login.html">Log in</a>
        </p>
    </div>
</div>

<script>
    const form = document.getElementById("registerForm"),
          btn  = document.getElementById("regBtn"),
          msg  = document.getElementById("msg");

    form.addEventListener("submit", async e => {
      e.preventDefault();
      btn.disabled = true;
      msg.textContent = "Registering…";

      const data = {
        username   : username.value.trim(),
        email      : email.value.trim(),
        password   : password.value,
        address    : address.value.trim(),
        phoneNumber: phoneNumber.value.trim()
      };

      try {
        const res = await fetch("/api/users/register", {
          method : "POST",
          headers: { "Content-Type":"application/json" },
          body   : JSON.stringify(data)
        });
        const txt = await res.text().then(t=>t.trim());
        if (txt === "Customer registered!") {
          alert("Registered! Please log in.");
          location.href = "login.html";
        } else {
          msg.textContent = txt;
        }
      } catch {
        msg.textContent = "Network error — try again.";
      } finally {
        btn.disabled = false;
      }
    });
</script>

</body>
</html>
